# Описание протоколов TCP и UDP

## TCP Protocol

Реализация надежного протокола поверх TCP с поддержкой больших сообщений.

### Формат сообщения:
```text
[4 байта - длина сообщения (big-endian)][данные сообщения]
```

### Пример работы:
```text
Сообщение: "Hello" (5 байт)
Отправляется: 0x00000005 + "Hello"
```

### Ключевые методы:
* `TCPProtocol.prepare_message(data: bytes) -> bytes`
    * Принимает: данные в байтах
    * Возвращает: данные с префиксом длины (4 байта)
    * Использует struct.pack('!I', length) для кодирования длины

* `TCPProtocol.receive_message(sock, buffer_size=4096) -> Tuple[bool, bytes]`
    * Принимает: сокет и размер буфера
    * Возвращает: (успех, данные)
    * Сначала читает 4 байта для определения длины
    * Затем читает оставшиеся данные порциями

### Особенности:
* Поддержка сообщений до 50KB+ (больше MTU)
* Гарантированная доставка всех данных
* Обработка частичных чтений
* Корректное закрытие соединений


## UDP Protocol
Простой протокол поверх UDP для обмена текстовыми сообщениями.

### Формат сообщения:
```text
[данные в UTF-8 кодировке]
```

### Пример работы:
```text
Сообщение: "Hello" → отправляется: b"Hello"
```

### Ключевые методы:
* `UDPProtocol.create_message(data: str) -> bytes`
    * Принимает: строку
    * Возвращает: байты в UTF-8 кодировке

* `UDPProtocol.parse_message(data: bytes) -> str`
    * Принимает: байты
    * Возвращает: декодированную строку

### Особенности:
* Простые датаграммы без гарантии доставки
* Быстрая отправка и получение
* Ответ на каждое полученное сообщение
* Таймауты на стороне клиента